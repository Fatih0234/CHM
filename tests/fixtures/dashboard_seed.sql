DELETE FROM alert_rules;
DELETE FROM runs;
DELETE FROM pipelines;
DELETE FROM clients;

INSERT INTO clients (id, name, is_active, created_at, updated_at) VALUES
  ('00000000-0000-0000-0000-000000000001', 'acme', TRUE, now(), now()),
  ('00000000-0000-0000-0000-000000000002', 'beta', TRUE, now(), now()),
  ('00000000-0000-0000-0000-000000000003', 'archived', FALSE, now(), now());

INSERT INTO pipelines (
  id,
  client_id,
  name,
  platform,
  external_id,
  pipeline_type,
  description,
  environment,
  is_active,
  created_at,
  updated_at
) VALUES
  (
    '00000000-0000-0000-0000-000000001001',
    '00000000-0000-0000-0000-000000000001',
    'ingest-a',
    'airflow',
    'ext-ingest-a',
    'ingestion',
    'Acme ingest pipeline',
    'prod',
    TRUE,
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000001002',
    '00000000-0000-0000-0000-000000000001',
    'transform-a',
    'dbt',
    'ext-transform-a',
    'transform',
    'Acme transform pipeline',
    'prod',
    TRUE,
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000001003',
    '00000000-0000-0000-0000-000000000002',
    'vendor-b',
    'vendor_api',
    'ext-vendor-b',
    'ingestion',
    'Beta vendor pipeline',
    'prod',
    TRUE,
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000001004',
    '00000000-0000-0000-0000-000000000002',
    'disabled-b',
    'airflow',
    'ext-disabled-b',
    'quality',
    'Beta disabled pipeline',
    'prod',
    FALSE,
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000001005',
    '00000000-0000-0000-0000-000000000003',
    'archived-c',
    'custom',
    'ext-archived-c',
    'healthcheck',
    'Archived client pipeline',
    'prod',
    TRUE,
    now(),
    now()
  );

INSERT INTO runs (
  id,
  pipeline_id,
  external_run_id,
  status,
  started_at,
  finished_at,
  duration_seconds,
  rows_processed,
  error_message,
  status_reason,
  payload,
  ingested_at,
  created_at,
  updated_at
) VALUES
  (
    '00000000-0000-0000-0000-000000002001',
    '00000000-0000-0000-0000-000000001001',
    'run-a1',
    'failed',
    now() - interval '2 hours',
    now() - interval '1 hour 50 minutes',
    600,
    1000,
    'step failed',
    'runtime_error',
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002002',
    '00000000-0000-0000-0000-000000001001',
    'run-a2',
    'success',
    now() - interval '4 hours',
    now() - interval '3 hours 45 minutes',
    900,
    1200,
    NULL,
    NULL,
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002003',
    '00000000-0000-0000-0000-000000001001',
    'run-a3',
    'failed',
    now() - interval '2 days',
    now() - interval '1 day 23 hours 40 minutes',
    1200,
    900,
    'upstream timeout',
    'timeout',
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002004',
    '00000000-0000-0000-0000-000000001001',
    'run-a4',
    'failed',
    now() - interval '31 days',
    now() - interval '30 days 23 hours 50 minutes',
    600,
    800,
    'historical error',
    'historical',
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002005',
    '00000000-0000-0000-0000-000000001002',
    'run-b1',
    'failed',
    now() - interval '26 hours',
    now() - interval '25 hours 30 minutes',
    1800,
    700,
    'quality threshold',
    'validation',
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002006',
    '00000000-0000-0000-0000-000000001002',
    'run-b2',
    'success',
    now() - interval '3 hours',
    now() - interval '2 hours 42 minutes',
    1100,
    1400,
    NULL,
    NULL,
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002007',
    '00000000-0000-0000-0000-000000001003',
    'run-c1',
    'success',
    now() - interval '1 hour',
    now() - interval '50 minutes',
    700,
    500,
    NULL,
    NULL,
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002008',
    '00000000-0000-0000-0000-000000001003',
    'run-c2',
    'failed',
    now() - interval '8 days',
    now() - interval '7 days 23 hours 45 minutes',
    500,
    450,
    'vendor API error',
    'api_error',
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  ),
  (
    '00000000-0000-0000-0000-000000002009',
    '00000000-0000-0000-0000-000000001004',
    'run-d1',
    'failed',
    now() - interval '90 minutes',
    now() - interval '75 minutes',
    300,
    300,
    'disabled pipeline still failing',
    'operational',
    '{"source":"seed"}'::jsonb,
    now(),
    now(),
    now()
  );
